from random import randint, sample
from itertools import chain, combinations
from time import time

class SSP():
    def __init__(self, S=[], t=0):
        self.S = S
        self.t = t
        self.n = len(S)
        #
        self.decision = False
        self.total    = 0
        self.selected = []

    def __repr__(self):
        return "SSP instance: S="+str(self.S)+"\tt="+str(self.t)
    
    def random_instance(self, n, bitlength=10):
        max_n_bit_number = 2**bitlength-1
        self.S = sorted( [ randint(0,max_n_bit_number) for i in range(n) ] , reverse=True)
        
        self.t = randint(0,n*max_n_bit_number)
        self.n = len( self.S )

    def random_yes_instance(self, n, bitlength=10):
        max_n_bit_number = 2**bitlength-1
        self.S = sorted( [ randint(0,max_n_bit_number) for i in range(n) ] , reverse=True)
        self.t = sum( sample(self.S, randint(0,n)) )
        self.n = len( self.S )


    def try_at_random(self):
        candidate = []
        total = 0
        while total != self.t:
            candidate = sample(self.S, randint(0,self.n))
            total     = sum(candidate)
            print( "Trying: ", candidate, ", sum:", total )

    def try_Exaust_search(self):
        candidate=[]
        total = 0
        print( "Trying: ", candidate, ", sum:", total )
        for j in range ((2**(self.n))-1):
            print (j)
            k=0
            while k <=self.n :
                for m in range (self.n-1):
                    if len(candidate)<j+1:
                        for l in range(j+1):
                            if l+k<self.n :
                                candidate.append(self.S[l+k])
                        else:
                            candidate.append(self.S[l+m])
                total = sum(candidate)
                print( "Trying: ", candidate, ", sum:", total )
                k+=1
                if total== self.t:
                    return 0
                candidate = []
instance = SSP()
instance.random_yes_instance(4)
print( instance )

#instance.try_at_random()
instance.try_Exaust_search()

